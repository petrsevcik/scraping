# README #

### immoscout24 scraper extracts properties to rent in Vienna from https://www.immobilienscout24.at/ website

#### General info ####
Scraper is build on Scrapy framework and contains two main spiders. Part of the repo are also two csv files `vienna_data.csv` and `developer_projects.csv` which contains scraped data from spiders


#### Spiders ####
- `realestate.py` - Main spider crawling over listed properties and extracting data `["full_address", "description", "rooms", "area", "price", "labels", "property_link", "contact", "company"]` 
  - method used - html page source contains js function generating json info about listed properties. 
  - No need to scrape by html tags. 
  - Not using playwright nor selenium to execute the script to get the data. It would slow down the process. 
  - Just grab the `<script>` tag body and extract desired string, later transformed to dict
  
- `developerprojects.py` Secondary spider for properties which contains more than 1 unit to rent. Saving data for unit with metadata of the parent property.
  - get list of properties which have more units than 1 from data generated by `realestate` spider
  - possible to get details about all units by request to immoscout24 GraphQL API
  - passing also rest of data about parent property in metadata
  - not formatting data so much, but could be done in the same way as in `realestate` part

  

#### Running the script on Mac/Linux ####
immoscout24 scraper  is part of scraping repo containing other non-related scrapers. 

To run it locally you can follow these steps:
```
# clone repo
git clone https://github.com/petrsevcik/scraping.git

# get to the project folder
cd scraping

# install requirements (virtual env recommeded!) 
python -m venv
source /bin/activate
pip install -r requirements.txt

# get to immoscout24 folder
cd immoscout24

# run spiders and get data to csv files
scrapy crawl realestate -o vienna_data.csv

scrapy crawl developerprojects -o developer_projects.csv

```

*Note: scrapers are independent on each other so you can take only immoscout24 folder, install scrapy and run it*

